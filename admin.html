<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Paneli - Anadolu'nun MirasÄ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Login Screen Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .login-box {
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 450px;
            width: 100%;
            text-align: center;
        }

        .login-box h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .login-box p {
            color: #666;
            margin-bottom: 30px;
        }

        .login-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .login-form {
            text-align: left;
        }

        .login-form .form-group {
            margin-bottom: 20px;
        }

        .login-form label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .login-form input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .login-form input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            border: 1px solid #f5c6cb;
        }

        .error-message.show {
            display: block;
        }

        .admin-panel {
            display: none;
        }

        .admin-panel.show {
            display: block;
        }

        .logout-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-left: 20px;
        }

        .logout-btn:hover {
            background: #d32f2f;
        }

        .default-credentials {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
        }

        .default-credentials strong {
            color: #1976d2;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            height: fit-content;
        }

        .sidebar h3 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .menu-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-item:hover {
            background: #f0f0f0;
        }

        .menu-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            min-height: 600px;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-danger {
            background: #f44336;
            color: white;
        }

        .btn-warning {
            background: #ff9800;
            color: white;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table th {
            background: #f5f5f5;
            font-weight: 600;
            color: #333;
        }

        .data-table tr:hover {
            background: #f9f9f9;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-buttons button {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 36px;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .color-picker-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-preview {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-icon">ğŸ”</div>
            <h1>Admin GiriÅŸi</h1>
            <p>Anadolu'nun MirasÄ± - YÃ¶netim Paneli</p>

            <div id="loginError" class="error-message">
                KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±!
            </div>

            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label>ğŸ‘¤ KullanÄ±cÄ± AdÄ±</label>
                    <input type="text" id="username" required placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin" autocomplete="username">
                </div>
                <div class="form-group">
                    <label>ğŸ”‘ Åifre</label>
                    <input type="password" id="password" required placeholder="Åifrenizi girin" autocomplete="current-password">
                </div>
                <button type="submit" class="login-btn">ğŸš€ GiriÅŸ Yap</button>
            </form>

            <div class="default-credentials">
                <strong>ğŸ“Œ GiriÅŸ bilgileri iÃ§in sistem yÃ¶neticisine baÅŸvurun.</strong>
            </div>
        </div>
    </div>

    <!-- Admin Panel (Hidden by default) -->
    <div id="adminPanel" class="admin-panel">
        <div class="container">
            <div class="header">
                <h1>ğŸ“ Admin Paneli</h1>
                <p>Anadolu'nun MirasÄ± - 7 BÃ¶lge + 7 Okul YÃ¶netim Paneli</p>
                <button class="logout-btn" onclick="logout()">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>

        <div class="admin-grid">
            <div class="sidebar">
                <h3>ğŸ“Š MenÃ¼</h3>
                <div class="menu-item active" onclick="showSection('dashboard')">
                    ğŸ“ˆ Dashboard
                </div>
                <div class="menu-item" onclick="showSection('regions')">
                    ğŸ—ºï¸ BÃ¶lgeler
                </div>
                <div class="menu-item" onclick="showSection('schools')">
                    ğŸ« Okullar
                </div>
                <div class="menu-item" onclick="showSection('school-about')">
                    ğŸ« Okul HakkÄ±nda
                </div>
                <div class="menu-item" onclick="showSection('leagues')">
                    ğŸ† Ligler
                </div>
                <div class="menu-item" onclick="showSection('activities')">
                    ğŸ¯ Etkinlikler
                </div>
                <div class="menu-item" onclick="showSection('gallery')">
                    ğŸ“¸ Galeri
                </div>
                <div class="menu-item" onclick="showSection('content')">
                    ğŸ“¤ Ä°Ã§erik PaylaÅŸÄ±mÄ±
                </div>
                <div class="menu-item" onclick="showSection('performance')">
                    ğŸ“Š Performans
                </div>
                <div class="menu-item" onclick="showSection('messages')">
                    ğŸ“§ Gelen Kutusu <span id="unread-badge" style="background: #e74c3c; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-left: 5px; display: none;"></span>
                </div>
                <div class="menu-item" onclick="showSection('export')">
                    ğŸ’¾ Veri YÃ¶netimi
                </div>
            </div>

            <div class="main-content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="content-section active">
                    <h2>ğŸ“ˆ Genel BakÄ±ÅŸ</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3 id="stat-regions">7</h3>
                            <p>Toplam BÃ¶lge</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-schools">7</h3>
                            <p>Toplam Okul</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-activities">0</h3>
                            <p>Toplam Etkinlik</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-gallery">0</h3>
                            <p>Galeri GÃ¶rseli</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="stat-content">0</h3>
                            <p>PaylaÅŸÄ±lan Ä°Ã§erik</p>
                        </div>
                    </div>
                </div>

                <!-- Regions Section -->
                <div id="regions" class="content-section">
                    <h2>ğŸ—ºï¸ BÃ¶lge YÃ¶netimi</h2>
                    <div class="alert alert-success" id="region-alert"></div>

                    <form id="regionForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>BÃ¶lge AdÄ± *</label>
                                <input type="text" id="region-name" required placeholder="Ã–rn: Marmara BÃ¶lgesi">
                            </div>
                            <div class="form-group">
                                <label>Renk *</label>
                                <div class="color-picker-group">
                                    <input type="color" id="region-color" required>
                                    <div class="color-preview" id="region-color-preview"></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>AÃ§Ä±klama</label>
                            <textarea id="region-description" placeholder="BÃ¶lge hakkÄ±nda kÄ±sa bilgi..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">â• BÃ¶lge Ekle</button>
                    </form>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>BÃ¶lge AdÄ±</th>
                                <th>Renk</th>
                                <th>AÃ§Ä±klama</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody id="regions-list">
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>

                <!-- Schools Section -->
                <div id="schools" class="content-section">
                    <h2>ğŸ« Okul YÃ¶netimi</h2>
                    <div class="alert alert-success" id="school-alert"></div>

                    <form id="schoolForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Okul AdÄ± *</label>
                                <input type="text" id="school-name" required placeholder="Ã–rn: AtatÃ¼rk Ä°lkokulu">
                            </div>
                            <div class="form-group">
                                <label>BÃ¶lge *</label>
                                <select id="school-region" required>
                                    <option value="">BÃ¶lge SeÃ§in</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Åehir *</label>
                                <input type="text" id="school-city" required placeholder="Ã–rn: Istanbul">
                            </div>
                            <div class="form-group">
                                <label>Ã–ÄŸrenci SayÄ±sÄ±</label>
                                <input type="number" id="school-students" placeholder="Ã–rn: 500">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Adres</label>
                            <textarea id="school-address" placeholder="Okul adresi..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">â• Okul Ekle</button>
                    </form>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Okul AdÄ±</th>
                                <th>BÃ¶lge</th>
                                <th>Åehir</th>
                                <th>Ã–ÄŸrenci SayÄ±sÄ±</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody id="schools-list">
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>

                <!-- Activities Section -->
                <div id="activities" class="content-section">
                    <h2>ğŸ¯ Etkinlik YÃ¶netimi</h2>
                    <div class="alert alert-success" id="activity-alert"></div>

                    <form id="activityForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Etkinlik AdÄ± *</label>
                                <input type="text" id="activity-name" required placeholder="Ã–rn: YÃ¶resel Yemek AtÃ¶lyesi">
                            </div>
                            <div class="form-group">
                                <label>Okul *</label>
                                <select id="activity-school" required>
                                    <option value="">Okul SeÃ§in</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tarih *</label>
                                <input type="date" id="activity-date" required>
                            </div>
                            <div class="form-group">
                                <label>Kategori *</label>
                                <select id="activity-category" required>
                                    <option value="">Kategori SeÃ§in</option>
                                    <option value="Gastronomi">ğŸ½ï¸ Gastronomi</option>
                                    <option value="MÃ¼zik">ğŸµ MÃ¼zik</option>
                                    <option value="Halk OyunlarÄ±">ğŸ’ƒ Halk OyunlarÄ±</option>
                                    <option value="SÃ¶zlÃ¼ Gelenek">ğŸ“š SÃ¶zlÃ¼ Gelenek</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>AÃ§Ä±klama</label>
                            <textarea id="activity-description" placeholder="Etkinlik detaylarÄ±..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>KatÄ±lÄ±mcÄ± SayÄ±sÄ±</label>
                            <input type="number" id="activity-participants" placeholder="Ã–rn: 50">
                        </div>
                        <button type="submit" class="btn btn-primary">â• Etkinlik Ekle</button>
                    </form>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Etkinlik AdÄ±</th>
                                <th>Okul</th>
                                <th>Kategori</th>
                                <th>Tarih</th>
                                <th>KatÄ±lÄ±mcÄ±</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody id="activities-list">
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>

                <!-- Gallery Section -->
                <div id="gallery" class="content-section">
                    <h2>ğŸ“¸ Galeri YÃ¶netimi</h2>
                    <div class="alert alert-success" id="gallery-alert"></div>

                    <form id="galleryForm">
                        <div class="form-group">
                            <label>GÃ¶rsel URL *</label>
                            <input type="url" id="gallery-url" required placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>BaÅŸlÄ±k *</label>
                                <input type="text" id="gallery-title" required placeholder="Ã–rn: YÃ¶resel Yemek AtÃ¶lyesi">
                            </div>
                            <div class="form-group">
                                <label>Kategori *</label>
                                <select id="gallery-category" required>
                                    <option value="">Kategori SeÃ§in</option>
                                    <option value="Gastronomi">ğŸ½ï¸ Gastronomi</option>
                                    <option value="MÃ¼zik">ğŸµ MÃ¼zik</option>
                                    <option value="Halk OyunlarÄ±">ğŸ’ƒ Halk OyunlarÄ±</option>
                                    <option value="SÃ¶zlÃ¼ Gelenek">ğŸ“š SÃ¶zlÃ¼ Gelenek</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">â• GÃ¶rsel Ekle</button>
                    </form>

                    <div id="gallery-preview" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                        <!-- JavaScript ile doldurulacak -->
                    </div>
                </div>

                <!-- Content Sharing Section -->
                <div id="content" class="content-section">
                    <h2>ğŸ“¤ Ä°Ã§erik PaylaÅŸÄ±mÄ±</h2>
                    <div class="alert alert-success" id="content-alert"></div>

                    <form id="contentForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ä°Ã§erik Tipi *</label>
                                <select id="content-type" required onchange="toggleContentFields()">
                                    <option value="">Tip SeÃ§in</option>
                                    <option value="photo">ğŸ“· FotoÄŸraf</option>
                                    <option value="video">ğŸ¥ Video</option>
                                    <option value="article">âœï¸ YazÄ±</option>
                                    <option value="event">ğŸ¯ Etkinlik</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Okul *</label>
                                <select id="content-school" required>
                                    <option value="">Okul SeÃ§in</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>YÄ±l TemasÄ± *</label>
                                <select id="content-year" required>
                                    <option value="">YÄ±l SeÃ§in</option>
                                    <option value="1">ğŸ½ï¸ 1. YÄ±l - Gastronomi</option>
                                    <option value="2">ğŸµ 2. YÄ±l - MÃ¼zik</option>
                                    <option value="3">ğŸ’ƒ 3. YÄ±l - Halk OyunlarÄ±</option>
                                    <option value="4">ğŸ“š 4. YÄ±l - SÃ¶zlÃ¼ Gelenek</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Tarih *</label>
                                <input type="date" id="content-date" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>BaÅŸlÄ±k *</label>
                            <input type="text" id="content-title" required placeholder="Ä°Ã§erik baÅŸlÄ±ÄŸÄ±">
                        </div>

                        <div id="file-field" class="form-group" style="display: none;">
                            <label>Dosya YÃ¼kle (Resim/Video) *</label>
                            <input type="file" id="content-file" accept="image/*,video/*">
                            <small style="color: #666; display: block; margin-top: 5px;">Maksimum 50MB - JPG, PNG, GIF, MP4, WEBM, OGG</small>
                            <div id="upload-progress" style="display: none; margin-top: 10px;">
                                <div style="background: #e0e0e0; height: 20px; border-radius: 10px; overflow: hidden;">
                                    <div id="progress-bar" style="background: #667eea; height: 100%; width: 0%; transition: width 0.3s;"></div>
                                </div>
                                <small id="progress-text" style="color: #666; display: block; margin-top: 5px;">YÃ¼kleniyor...</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>AÃ§Ä±klama/Ä°Ã§erik</label>
                            <textarea id="content-description" rows="5" placeholder="Ä°Ã§erik aÃ§Ä±klamasÄ± veya yazÄ± metni..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Yazar/PaylaÅŸan</label>
                            <input type="text" id="content-author" placeholder="Ã–rn: Ahmet YÄ±lmaz - 10/A">
                        </div>

                        <button type="submit" class="btn btn-primary">â• Ä°Ã§erik Ekle</button>
                    </form>

                    <h3 style="margin-top: 40px;">PaylaÅŸÄ±lan Ä°Ã§erikler</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Tip</th>
                                <th>BaÅŸlÄ±k</th>
                                <th>Okul</th>
                                <th>YÄ±l</th>
                                <th>Yazar</th>
                                <th>Tarih</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody id="content-list">
                            <!-- JavaScript ile doldurulacak -->
                        </tbody>
                    </table>
                </div>

                <!-- School About Section -->
                <div id="school-about" class="content-section">
                    <h2>ğŸ« Okul HakkÄ±nda - Bilgi YÃ¶netimi</h2>
                    <p style="color: #666; margin-bottom: 20px;">Her okul iÃ§in KuruluÅŸ, Ã–ÄŸrenci SayÄ±sÄ±, Ã–ÄŸretmen Kadrosu ve BaÅŸarÄ±lar bilgilerini girin.</p>

                    <div class="alert alert-success" id="school-about-alert"></div>

                    <div class="form-group">
                        <label>Okul SeÃ§in *</label>
                        <select id="about-school-select" onchange="loadSchoolAboutData()" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                            <option value="">-- Okul SeÃ§in --</option>
                        </select>
                    </div>

                    <div id="school-about-form-container" style="display: none;">
                        <!-- KuruluÅŸ -->
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 20px; border-left: 5px solid #667eea;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ›ï¸ KuruluÅŸ Bilgileri</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>KuruluÅŸ YÄ±lÄ±</label>
                                    <input type="number" id="about-kurulus-yili" placeholder="Ã–rn: 1985" min="1900" max="2030">
                                </div>
                                <div class="form-group">
                                    <label>Okul TÃ¼rÃ¼</label>
                                    <select id="about-okul-turu">
                                        <option value="">SeÃ§in</option>
                                        <option value="Anadolu Lisesi">Anadolu Lisesi</option>
                                        <option value="Fen Lisesi">Fen Lisesi</option>
                                        <option value="Sosyal Bilimler Lisesi">Sosyal Bilimler Lisesi</option>
                                        <option value="Ä°mam Hatip Lisesi">Ä°mam Hatip Lisesi</option>
                                        <option value="Mesleki ve Teknik Lise">Mesleki ve Teknik Lise</option>
                                        <option value="GÃ¼zel Sanatlar Lisesi">GÃ¼zel Sanatlar Lisesi</option>
                                        <option value="Spor Lisesi">Spor Lisesi</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>KuruluÅŸ Hikayesi / TarihÃ§e</label>
                                <textarea id="about-kurulus-hikaye" rows="4" placeholder="Okulun kuruluÅŸ hikayesi ve tarihÃ§esi..."></textarea>
                            </div>
                        </div>

                        <!-- Ã–ÄŸrenci SayÄ±sÄ± -->
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 20px; border-left: 5px solid #4caf50;">
                            <h3 style="color: #4caf50; margin-bottom: 15px;">ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci Bilgileri</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Toplam Ã–ÄŸrenci SayÄ±sÄ±</label>
                                    <input type="number" id="about-ogrenci-toplam" placeholder="Ã–rn: 850">
                                </div>
                                <div class="form-group">
                                    <label>KÄ±z Ã–ÄŸrenci SayÄ±sÄ±</label>
                                    <input type="number" id="about-ogrenci-kiz" placeholder="Ã–rn: 420">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Erkek Ã–ÄŸrenci SayÄ±sÄ±</label>
                                    <input type="number" id="about-ogrenci-erkek" placeholder="Ã–rn: 430">
                                </div>
                                <div class="form-group">
                                    <label>SÄ±nÄ±f SayÄ±sÄ±</label>
                                    <input type="number" id="about-sinif-sayisi" placeholder="Ã–rn: 32">
                                </div>
                            </div>
                        </div>

                        <!-- Ã–ÄŸretmen Kadrosu -->
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 20px; border-left: 5px solid #ff9800;">
                            <h3 style="color: #ff9800; margin-bottom: 15px;">ğŸ‘©â€ğŸ« Ã–ÄŸretmen Kadrosu</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Toplam Ã–ÄŸretmen SayÄ±sÄ±</label>
                                    <input type="number" id="about-ogretmen-toplam" placeholder="Ã–rn: 65">
                                </div>
                                <div class="form-group">
                                    <label>MÃ¼dÃ¼r AdÄ±</label>
                                    <input type="text" id="about-mudur-adi" placeholder="Ã–rn: Ahmet YÄ±lmaz">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>BranÅŸ DaÄŸÄ±lÄ±mÄ± / Kadro Bilgisi</label>
                                <textarea id="about-ogretmen-brans" rows="3" placeholder="Ã–rn: Matematik: 8, TÃ¼rkÃ§e: 6, Fen Bilimleri: 7..."></textarea>
                            </div>
                        </div>

                        <!-- BaÅŸarÄ±lar -->
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 20px; border-left: 5px solid #e91e63;">
                            <h3 style="color: #e91e63; margin-bottom: 15px;">ğŸ† BaÅŸarÄ±lar</h3>
                            <div class="form-group">
                                <label>Akademik BaÅŸarÄ±lar</label>
                                <textarea id="about-basari-akademik" rows="3" placeholder="YKS, olimpiyat, yarÄ±ÅŸma baÅŸarÄ±larÄ±..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>Sportif BaÅŸarÄ±lar</label>
                                <textarea id="about-basari-sportif" rows="3" placeholder="Spor mÃ¼sabakalarÄ±, ÅŸampiyonluklar..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>Sosyal ve KÃ¼ltÃ¼rel BaÅŸarÄ±lar</label>
                                <textarea id="about-basari-sosyal" rows="3" placeholder="Proje Ã¶dÃ¼lleri, kÃ¼ltÃ¼rel etkinlik baÅŸarÄ±larÄ±..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>Proje BaÅŸarÄ±larÄ± (eTwinning, TÃœBÄ°TAK vb.)</label>
                                <textarea id="about-basari-proje" rows="3" placeholder="eTwinning, TÃœBÄ°TAK, Erasmus+ vb. proje baÅŸarÄ±larÄ±..."></textarea>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="saveSchoolAboutData()">ğŸ’¾ Kaydet</button>
                            <button class="btn btn-warning" onclick="clearSchoolAboutForm()">ğŸ”„ Formu Temizle</button>
                        </div>

                        <!-- KayÄ±tlÄ± Bilgiler Tablosu -->
                        <div style="margin-top: 40px;">
                            <h3>ğŸ“‹ KayÄ±tlÄ± Okul Bilgileri Ã–zeti</h3>
                            <div id="school-about-summary" style="margin-top: 15px;">
                                <!-- JS ile doldurulacak -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Leagues Section -->
                <div id="leagues" class="content-section">
                    <h2>ğŸ† Lig YÃ¶netimi</h2>
                    <p style="color: #666; margin-bottom: 20px;">KÄ±zlar Voleybol ve Erkekler Basketbol liglerinde okul puan durumlarÄ±nÄ± yÃ¶netin.</p>

                    <div class="alert alert-success" id="league-alert"></div>

                    <!-- Lig SeÃ§imi -->
                    <div style="display: flex; gap: 10px; margin-bottom: 25px;">
                        <button class="btn btn-primary" id="league-btn-voleybol" onclick="selectLeague('7 Okul 7 BÃ¶lge KÄ±zlar Voleybol Ligi')" style="flex: 1; padding: 15px; font-size: 15px;">
                            ğŸ KÄ±zlar Voleybol Ligi
                        </button>
                        <button class="btn btn-secondary" id="league-btn-basketbol" onclick="selectLeague('7 Okul 7 BÃ¶lge Erkekler Basketbol Ligi')" style="flex: 1; padding: 15px; font-size: 15px;">
                            ğŸ€ Erkekler Basketbol Ligi
                        </button>
                    </div>

                    <div id="league-form-container" style="display: none;">
                        <h3 id="league-selected-title" style="margin-bottom: 20px; color: #333;"></h3>

                        <!-- Puan Tablosu -->
                        <div style="overflow-x: auto; margin-bottom: 30px;">
                            <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
                                <thead>
                                    <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">SÄ±ra</th>
                                        <th style="padding: 14px 12px; text-align: left; font-size: 13px;">Okul</th>
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">O</th>
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">G</th>
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">B</th>
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">M</th>
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">P</th>
                                        <th style="padding: 14px 12px; text-align: center; font-size: 13px;">Ä°ÅŸlem</th>
                                    </tr>
                                </thead>
                                <tbody id="league-standings-body">
                                    <!-- JS ile doldurulacak -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Veri GiriÅŸi -->
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; border-left: 5px solid #667eea;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ“ Puan GiriÅŸi</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Okul SeÃ§in *</label>
                                    <select id="league-school-select" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                        <option value="">-- Okul SeÃ§in --</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Oynanan MaÃ§ (O)</label>
                                    <input type="number" id="league-played" placeholder="0" min="0">
                                </div>
                                <div class="form-group">
                                    <label>Galibiyet (G)</label>
                                    <input type="number" id="league-won" placeholder="0" min="0">
                                </div>
                                <div class="form-group">
                                    <label>Beraberlik (B)</label>
                                    <input type="number" id="league-drawn" placeholder="0" min="0">
                                </div>
                                <div class="form-group">
                                    <label>MaÄŸlubiyet (M)</label>
                                    <input type="number" id="league-lost" placeholder="0" min="0">
                                </div>
                                <div class="form-group">
                                    <label>Puan (P)</label>
                                    <input type="number" id="league-points" placeholder="0" min="0">
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-primary" onclick="saveLeagueData()">ğŸ’¾ Kaydet</button>
                                <button class="btn btn-warning" onclick="clearLeagueForm()">ğŸ”„ Temizle</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Section -->
                <div id="performance" class="content-section">
                    <h2>ğŸ“Š Performans Takibi</h2>
                    <p style="color: #666; margin-bottom: 20px;">OkullarÄ±n etkinlik, katÄ±lÄ±mcÄ± ve iÃ§erik verilerine gÃ¶re otomatik hesaplanan performans puanlarÄ±. Bu veriler ana sayfada gÃ¶rÃ¼ntÃ¼lenir.</p>

                    <div class="alert alert-success" id="performance-alert"></div>

                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-primary" onclick="loadPerformanceAdmin()">ğŸ”„ Yenile</button>
                    </div>

                    <!-- Puan Hesaplama Bilgisi -->
                    <div style="background: #e8f5e9; padding: 20px; border-radius: 12px; margin-bottom: 25px; border-left: 4px solid #4caf50;">
                        <h3 style="margin: 0 0 10px 0; color: #2e7d32;">Puan Hesaplama</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <div><strong>Etkinlik:</strong> Her etkinlik = 10 puan</div>
                            <div><strong>Katilimci:</strong> Her 10 katilimci = 1 puan</div>
                            <div><strong>Icerik:</strong> Her icerik = 5 puan</div>
                            <div><strong>Koordinator:</strong> +50 bonus puan</div>
                        </div>
                    </div>

                    <!-- Performans Tablosu -->
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Sira</th>
                                <th>Okul</th>
                                <th>Bolge</th>
                                <th>Etkinlik</th>
                                <th>Katilimci</th>
                                <th>Icerik</th>
                                <th>Koordinator</th>
                                <th>Toplam Puan</th>
                            </tr>
                        </thead>
                        <tbody id="performance-list">
                            <tr><td colspan="8" style="text-align: center; padding: 30px; color: #999;">Yukluyor...</td></tr>
                        </tbody>
                    </table>

                    <!-- Ozet Kartlari -->
                    <div id="performance-summary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-top: 25px;">
                    </div>
                </div>

                <!-- Messages Section -->
                <div id="messages" class="content-section">
                    <h2>ğŸ“§ Gelen Kutusu</h2>

                    <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="loadMessages()">ğŸ”„ Yenile</button>
                        <button class="btn btn-secondary" onclick="filterMessages('all')">ğŸ“¬ TÃ¼mÃ¼</button>
                        <button class="btn btn-info" onclick="filterMessages('unread')">ğŸ“© OkunmamÄ±ÅŸ</button>
                        <button class="btn btn-success" onclick="filterMessages('read')">âœ… OkunmuÅŸ</button>
                    </div>

                    <div id="messages-list" style="display: grid; gap: 15px;">
                        <!-- Mesajlar buraya yÃ¼klenecek -->
                    </div>
                </div>

                <div id="export" class="content-section">
                    <h2>ğŸ’¾ Veri YÃ¶netimi</h2>

                    <div style="display: grid; gap: 20px;">
                        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <h3>ğŸ“¥ Veri DÄ±ÅŸa Aktar</h3>
                            <p style="margin: 10px 0; color: #666;">TÃ¼m verileri JSON formatÄ±nda dÄ±ÅŸa aktarÄ±n.</p>
                            <button class="btn btn-success" onclick="exportData()">ğŸ“¥ Verileri Ä°ndir (JSON)</button>
                        </div>

                        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <h3>ğŸ“¤ Veri Ä°Ã§e Aktar</h3>
                            <p style="margin: 10px 0; color: #666;">Daha Ã¶nce dÄ±ÅŸa aktarÄ±lmÄ±ÅŸ JSON dosyasÄ±nÄ± yÃ¼kleyin.</p>
                            <input type="file" id="import-file" accept=".json" style="margin: 10px 0;">
                            <button class="btn btn-warning" onclick="importData()">ğŸ“¤ Verileri YÃ¼kle</button>
                        </div>

                        <div style="background: #fff3cd; padding: 20px; border-radius: 10px; border: 2px solid #ffc107;">
                            <h3>âš ï¸ Tehlikeli BÃ¶lge</h3>
                            <p style="margin: 10px 0; color: #856404;">TÃ¼m verileri silmek iÃ§in dikkatli olun. Bu iÅŸlem geri alÄ±namaz!</p>
                            <button class="btn btn-danger" onclick="clearAllData()">ğŸ—‘ï¸ TÃ¼m Verileri Sil</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        // VarsayÄ±lan 7 okul
        const DEFAULT_SCHOOLS = [
            {
                id: 1,
                name: 'GÃ¶ztepe Ä°hsan KurÅŸunoÄŸlu Anadolu Lisesi',
                region: 'Marmara BÃ¶lgesi',
                city: 'Bilecik',
                students: '500',
                address: 'Bilecik'
            },
            {
                id: 2,
                name: 'TEB AtaÅŸehir Anadolu Lisesi',
                region: 'Ege BÃ¶lgesi',
                city: 'Ä°zmir',
                students: '450',
                address: 'Ä°zmir'
            },
            {
                id: 3,
                name: 'AtatÃ¼rk Fen Lisesi',
                region: 'Akdeniz BÃ¶lgesi',
                city: 'Antalya',
                students: '600',
                address: 'Antalya'
            },
            {
                id: 4,
                name: 'Kadir Has Anadolu Lisesi',
                region: 'Ä°Ã§ Anadolu BÃ¶lgesi',
                city: 'Ankara',
                students: '550',
                address: 'Ankara'
            },
            {
                id: 5,
                name: 'KadÄ±kÃ¶y Anadolu Lisesi',
                region: 'Karadeniz BÃ¶lgesi',
                city: 'Trabzon',
                students: '400',
                address: 'Trabzon'
            },
            {
                id: 6,
                name: 'ErenkÃ¶y KÄ±z Anadolu Lisesi',
                region: 'DoÄŸu Anadolu BÃ¶lgesi',
                city: 'ElazÄ±ÄŸ',
                students: '350',
                address: 'ElazÄ±ÄŸ'
            },
            {
                id: 7,
                name: 'Hayrullah KefoÄŸlu Anadolu Lisesi',
                region: 'GÃ¼neydoÄŸu Anadolu BÃ¶lgesi',
                city: 'Gaziantep',
                students: '480',
                address: 'Gaziantep'
            }
        ];

        // API URL'leri
        const REGIONS_API = 'regions_handler.php';
        const SCHOOLS_API = 'schools_handler.php';
        const ACTIVITIES_API = 'activities_handler.php';
        const GALLERY_API = 'gallery_handler.php';

        // VeritabanÄ±ndan yÃ¼klenen veriler
        let regions = [];
        let schools = [];
        let activities = [];
        let gallery = [];
        let sharedContent = [];

        // Sayfa yÃ¼klendiÄŸinde tÃ¼m verileri sunucudan Ã§ek
        document.addEventListener('DOMContentLoaded', async function() {
            await loadAllDataFromServer();
            updateDropdowns();
        });

        // TÃ¼m verileri sunucudan yÃ¼kle
        async function loadAllDataFromServer() {
            try {
                const [regionsRes, schoolsRes, activitiesRes, galleryRes] = await Promise.all([
                    fetch(REGIONS_API).then(r => r.json()),
                    fetch(SCHOOLS_API).then(r => r.json()),
                    fetch(ACTIVITIES_API).then(r => r.json()),
                    fetch(GALLERY_API).then(r => r.json())
                ]);

                if (regionsRes.success) regions = regionsRes.data;
                if (schoolsRes.success) schools = schoolsRes.data;
                if (activitiesRes.success) activities = activitiesRes.data;
                if (galleryRes.success) gallery = galleryRes.data;

                updateStats();
                renderRegions();
                renderSchools();
                renderActivities();
                renderGallery();
                loadContentFromServer();
            } catch (error) {
                console.error('Veriler yÃ¼klenirken hata:', error);
                showAlert('region-alert', 'Sunucu baÄŸlantÄ±sÄ± kurulamadÄ±. VeritabanÄ± ayarlarÄ±nÄ± kontrol edin.', 'error');
            }
        }

        // MenÃ¼ navigasyonu
        function showSection(sectionId) {
            // TÃ¼m content bÃ¶lÃ¼mlerini gizle
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // SeÃ§ili bÃ¶lÃ¼mÃ¼ gÃ¶ster
            document.getElementById(sectionId).classList.add('active');

            // MenÃ¼ item'lerini gÃ¼ncelle
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');

            // Mesajlar bÃ¶lÃ¼mÃ¼ aÃ§Ä±ldÄ±ÄŸÄ±nda mesajlarÄ± yÃ¼kle
            if (sectionId === 'messages') {
                loadMessages();
            }
            // Performans bÃ¶lÃ¼mÃ¼ aÃ§Ä±ldÄ±ÄŸÄ±nda verileri yÃ¼kle
            if (sectionId === 'performance') {
                loadPerformanceAdmin();
            }
        }

        // Ä°statistikleri gÃ¼ncelle
        function updateStats() {
            document.getElementById('stat-regions').textContent = regions.length;
            document.getElementById('stat-schools').textContent = schools.length;
            document.getElementById('stat-activities').textContent = activities.length;
            document.getElementById('stat-gallery').textContent = gallery.length;
            document.getElementById('stat-content').textContent = sharedContent.length;
        }

        // Alert gÃ¶ster
        function showAlert(alertId, message, type = 'success') {
            const alert = document.getElementById(alertId);
            alert.textContent = message;
            alert.className = `alert alert-${type} show`;
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        // BÃ–LGE YÃ–NETÄ°MÄ°
        document.getElementById('regionForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const region = {
                name: document.getElementById('region-name').value,
                color: document.getElementById('region-color').value,
                description: document.getElementById('region-description').value
            };

            try {
                const response = await fetch(REGIONS_API, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(region)
                });
                const result = await response.json();

                if (result.success) {
                    showAlert('region-alert', 'BÃ¶lge baÅŸarÄ±yla eklendi!');
                    this.reset();
                    await loadRegionsFromServer();
                    updateStats();
                    updateDropdowns();
                } else {
                    showAlert('region-alert', 'Hata: ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('region-alert', 'Sunucu hatasÄ±: ' + error.message, 'error');
            }
        });

        async function loadRegionsFromServer() {
            try {
                const response = await fetch(REGIONS_API);
                const result = await response.json();
                if (result.success) {
                    regions = result.data;
                    renderRegions();
                }
            } catch (error) {
                console.error('BÃ¶lgeler yÃ¼klenirken hata:', error);
            }
        }

        function renderRegions() {
            const list = document.getElementById('regions-list');
            list.innerHTML = '';

            regions.forEach(region => {
                const row = `
                    <tr>
                        <td>${region.name}</td>
                        <td><div style="width: 30px; height: 30px; background: ${region.color}; border-radius: 5px;"></div></td>
                        <td>${region.description || '-'}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-danger" onclick="deleteRegion(${region.id})">ğŸ—‘ï¸ Sil</button>
                            </div>
                        </td>
                    </tr>
                `;
                list.innerHTML += row;
            });
        }

        async function deleteRegion(id) {
            if (confirm('Bu bÃ¶lgeyi silmek istediÄŸinizden emin misiniz?')) {
                try {
                    const response = await fetch(REGIONS_API, {
                        method: 'DELETE',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id: id })
                    });
                    const result = await response.json();

                    if (result.success) {
                        showAlert('region-alert', 'BÃ¶lge silindi!');
                        await loadRegionsFromServer();
                        updateStats();
                        updateDropdowns();
                    }
                } catch (error) {
                    showAlert('region-alert', 'Silme hatasÄ±: ' + error.message, 'error');
                }
            }
        }

        // OKUL YÃ–NETÄ°MÄ°
        document.getElementById('schoolForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const school = {
                name: document.getElementById('school-name').value,
                region: document.getElementById('school-region').value,
                city: document.getElementById('school-city').value,
                students: document.getElementById('school-students').value,
                address: document.getElementById('school-address').value
            };

            try {
                const response = await fetch(SCHOOLS_API, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(school)
                });
                const result = await response.json();

                if (result.success) {
                    showAlert('school-alert', 'Okul baÅŸarÄ±yla eklendi!');
                    this.reset();
                    await loadSchoolsFromServer();
                    updateStats();
                    updateDropdowns();
                } else {
                    showAlert('school-alert', 'Hata: ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('school-alert', 'Sunucu hatasÄ±: ' + error.message, 'error');
            }
        });

        async function loadSchoolsFromServer() {
            try {
                const response = await fetch(SCHOOLS_API);
                const result = await response.json();
                if (result.success) {
                    schools = result.data;
                    renderSchools();
                }
            } catch (error) {
                console.error('Okullar yÃ¼klenirken hata:', error);
            }
        }

        function renderSchools() {
            const list = document.getElementById('schools-list');
            list.innerHTML = '';

            schools.forEach(school => {
                const row = `
                    <tr>
                        <td>${school.name}</td>
                        <td>${school.region}</td>
                        <td>${school.city}</td>
                        <td>${school.students || '-'}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-danger" onclick="deleteSchool(${school.id})">ğŸ—‘ï¸ Sil</button>
                            </div>
                        </td>
                    </tr>
                `;
                list.innerHTML += row;
            });
        }

        async function deleteSchool(id) {
            if (confirm('Bu okulu silmek istediÄŸinizden emin misiniz?')) {
                try {
                    const response = await fetch(SCHOOLS_API, {
                        method: 'DELETE',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id: id })
                    });
                    const result = await response.json();

                    if (result.success) {
                        showAlert('school-alert', 'Okul silindi!');
                        await loadSchoolsFromServer();
                        updateStats();
                        updateDropdowns();
                    }
                } catch (error) {
                    showAlert('school-alert', 'Silme hatasÄ±: ' + error.message, 'error');
                }
            }
        }

        // ETKÄ°NLÄ°K YÃ–NETÄ°MÄ°
        document.getElementById('activityForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const activity = {
                name: document.getElementById('activity-name').value,
                school: document.getElementById('activity-school').value,
                date: document.getElementById('activity-date').value,
                category: document.getElementById('activity-category').value,
                description: document.getElementById('activity-description').value,
                participants: document.getElementById('activity-participants').value
            };

            try {
                const response = await fetch(ACTIVITIES_API, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(activity)
                });
                const result = await response.json();

                if (result.success) {
                    showAlert('activity-alert', 'Etkinlik baÅŸarÄ±yla eklendi!');
                    this.reset();
                    await loadActivitiesFromServer();
                    updateStats();
                } else {
                    showAlert('activity-alert', 'Hata: ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('activity-alert', 'Sunucu hatasÄ±: ' + error.message, 'error');
            }
        });

        async function loadActivitiesFromServer() {
            try {
                const response = await fetch(ACTIVITIES_API);
                const result = await response.json();
                if (result.success) {
                    activities = result.data;
                    renderActivities();
                }
            } catch (error) {
                console.error('Etkinlikler yÃ¼klenirken hata:', error);
            }
        }

        function renderActivities() {
            const list = document.getElementById('activities-list');
            list.innerHTML = '';

            activities.forEach(activity => {
                const row = `
                    <tr>
                        <td>${activity.name}</td>
                        <td>${activity.school}</td>
                        <td>${activity.category}</td>
                        <td>${activity.date}</td>
                        <td>${activity.participants || '-'}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-danger" onclick="deleteActivity(${activity.id})">ğŸ—‘ï¸ Sil</button>
                            </div>
                        </td>
                    </tr>
                `;
                list.innerHTML += row;
            });
        }

        async function deleteActivity(id) {
            if (confirm('Bu etkinliÄŸi silmek istediÄŸinizden emin misiniz?')) {
                try {
                    const response = await fetch(ACTIVITIES_API, {
                        method: 'DELETE',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id: id })
                    });
                    const result = await response.json();

                    if (result.success) {
                        showAlert('activity-alert', 'Etkinlik silindi!');
                        await loadActivitiesFromServer();
                        updateStats();
                    }
                } catch (error) {
                    showAlert('activity-alert', 'Silme hatasÄ±: ' + error.message, 'error');
                }
            }
        }

        // GALERÄ° YÃ–NETÄ°MÄ°
        document.getElementById('galleryForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const item = {
                url: document.getElementById('gallery-url').value,
                title: document.getElementById('gallery-title').value,
                category: document.getElementById('gallery-category').value
            };

            try {
                const response = await fetch(GALLERY_API, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(item)
                });
                const result = await response.json();

                if (result.success) {
                    showAlert('gallery-alert', 'GÃ¶rsel baÅŸarÄ±yla eklendi!');
                    this.reset();
                    await loadGalleryFromServer();
                    updateStats();
                } else {
                    showAlert('gallery-alert', 'Hata: ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('gallery-alert', 'Sunucu hatasÄ±: ' + error.message, 'error');
            }
        });

        async function loadGalleryFromServer() {
            try {
                const response = await fetch(GALLERY_API);
                const result = await response.json();
                if (result.success) {
                    gallery = result.data;
                    renderGallery();
                }
            } catch (error) {
                console.error('Galeri yÃ¼klenirken hata:', error);
            }
        }

        function renderGallery() {
            const preview = document.getElementById('gallery-preview');
            preview.innerHTML = '';

            gallery.forEach(item => {
                const card = `
                    <div style="position: relative; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <img src="${item.url}" alt="${item.title}" style="width: 100%; height: 200px; object-fit: cover;">
                        <div style="padding: 10px; background: white;">
                            <strong>${item.title}</strong>
                            <p style="font-size: 12px; color: #666; margin: 5px 0 0 0;">${item.category}</p>
                        </div>
                        <button onclick="deleteGallery(${item.id})" style="position: absolute; top: 10px; right: 10px; background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">ğŸ—‘ï¸</button>
                    </div>
                `;
                preview.innerHTML += card;
            });
        }

        async function deleteGallery(id) {
            if (confirm('Bu gÃ¶rseli silmek istediÄŸinizden emin misiniz?')) {
                try {
                    const response = await fetch(GALLERY_API, {
                        method: 'DELETE',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id: id })
                    });
                    const result = await response.json();

                    if (result.success) {
                        showAlert('gallery-alert', 'GÃ¶rsel silindi!');
                        await loadGalleryFromServer();
                        updateStats();
                    }
                } catch (error) {
                    showAlert('gallery-alert', 'Silme hatasÄ±: ' + error.message, 'error');
                }
            }
        }

        // Ä°Ã‡ERÄ°K PAYLAÅIMI YÃ–NETÄ°MÄ°
        const API_URL = 'upload.php'; // PHP backend URL'i

        function toggleContentFields() {
            const type = document.getElementById('content-type').value;
            const fileField = document.getElementById('file-field');
            const fileInput = document.getElementById('content-file');

            if (type === 'photo' || type === 'video' || type === 'event') {
                fileField.style.display = 'block';
                fileInput.required = true;
            } else {
                fileField.style.display = 'none';
                fileInput.required = false;
            }
        }

        // Dosya yÃ¼kleme fonksiyonu
        async function uploadFile(file) {
            const formData = new FormData();
            formData.append('file', file);

            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const uploadProgress = document.getElementById('upload-progress');

            uploadProgress.style.display = 'block';

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                uploadProgress.style.display = 'none';

                if (result.success) {
                    return result.url;
                } else {
                    throw new Error(result.message);
                }

            } catch (error) {
                uploadProgress.style.display = 'none';
                throw error;
            }
        }

        document.getElementById('contentForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const type = document.getElementById('content-type').value;
            const fileInput = document.getElementById('content-file');
            let fileUrl = '';

            try {
                // EÄŸer fotoÄŸraf veya video ise dosyayÄ± yÃ¼kle
                if ((type === 'photo' || type === 'video' || type === 'event') && fileInput.files.length > 0) {
                    showAlert('content-alert', 'Dosya yÃ¼kleniyor...', 'success');
                    fileUrl = await uploadFile(fileInput.files[0]);
                }

                const content = {
                    type: type,
                    school: document.getElementById('content-school').value,
                    year: document.getElementById('content-year').value,
                    date: document.getElementById('content-date').value,
                    title: document.getElementById('content-title').value,
                    url: fileUrl,
                    description: document.getElementById('content-description').value,
                    author: document.getElementById('content-author').value,
                    content: document.getElementById('content-description').value
                };

                // Sunucuya kaydet
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(content)
                });

                const result = await response.json();

                if (result.success) {
                    showAlert('content-alert', 'Ä°Ã§erik baÅŸarÄ±yla eklendi!');
                    this.reset();
                    toggleContentFields();
                    loadContentFromServer(); // Sunucudan iÃ§erikleri yeniden yÃ¼kle
                    updateStats();
                } else {
                    showAlert('content-alert', 'Hata: ' + result.message, 'error');
                }

            } catch (error) {
                showAlert('content-alert', 'Hata: ' + error.message, 'error');
            }
        });

        // Sunucudan iÃ§erikleri yÃ¼kle
        async function loadContentFromServer() {
            try {
                const response = await fetch(API_URL);
                const result = await response.json();

                if (result.success) {
                    sharedContent = result.data;
                    renderContent();
                    updateStats();
                }
            } catch (error) {
                console.error('Ä°Ã§erikler yÃ¼klenirken hata:', error);
            }
        }

        function renderContent() {
            const list = document.getElementById('content-list');
            list.innerHTML = '';

            sharedContent.forEach(content => {
                const typeIcons = {
                    'photo': 'ğŸ“·',
                    'video': 'ğŸ¥',
                    'article': 'âœï¸',
                    'event': 'ğŸ¯'
                };

                const yearLabels = {
                    '1': 'ğŸ½ï¸ Gastronomi',
                    '2': 'ğŸµ MÃ¼zik',
                    '3': 'ğŸ’ƒ Halk OyunlarÄ±',
                    '4': 'ğŸ“š SÃ¶zlÃ¼ Gelenek'
                };

                const row = `
                    <tr>
                        <td>${typeIcons[content.type]} ${content.type}</td>
                        <td>${content.title}</td>
                        <td>${content.school}</td>
                        <td>${yearLabels[content.year] || content.year}</td>
                        <td>${content.author || '-'}</td>
                        <td>${new Date(content.date).toLocaleDateString('tr-TR')}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-danger" onclick="deleteContent(${content.id})">ğŸ—‘ï¸ Sil</button>
                            </div>
                        </td>
                    </tr>
                `;
                list.innerHTML += row;
            });
        }

        async function deleteContent(id) {
            if (confirm('Bu iÃ§eriÄŸi silmek istediÄŸinizden emin misiniz?')) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ id: id })
                    });

                    const result = await response.json();

                    if (result.success) {
                        showAlert('content-alert', 'Ä°Ã§erik baÅŸarÄ±yla silindi!');
                        loadContentFromServer();
                    } else {
                        alert('Hata: ' + result.message);
                    }
                } catch (error) {
                    alert('Hata: ' + error.message);
                }
            }
        }

        // Dropdown'larÄ± gÃ¼ncelle
        function updateDropdowns() {
            // BÃ¶lge dropdown
            const regionSelect = document.getElementById('school-region');
            regionSelect.innerHTML = '<option value="">BÃ¶lge SeÃ§in</option>';
            regions.forEach(region => {
                regionSelect.innerHTML += `<option value="${region.name}">${region.name}</option>`;
            });

            // Okul dropdown (Etkinlikler)
            const schoolSelect = document.getElementById('activity-school');
            schoolSelect.innerHTML = '<option value="">Okul SeÃ§in</option>';
            schools.forEach(school => {
                schoolSelect.innerHTML += `<option value="${school.name}">${school.name}</option>`;
            });

            // Okul dropdown (Ä°Ã§erik PaylaÅŸÄ±mÄ±)
            const contentSchoolSelect = document.getElementById('content-school');
            if (contentSchoolSelect) {
                contentSchoolSelect.innerHTML = '<option value="">Okul SeÃ§in</option>';
                schools.forEach(school => {
                    contentSchoolSelect.innerHTML += `<option value="${school.name}">${school.name}</option>`;
                });
            }
        }

        // Renk Ã¶nizleme
        document.getElementById('region-color').addEventListener('input', function(e) {
            document.getElementById('region-color-preview').style.background = e.target.value;
        });

        // PERFORMANS TAKÄ°BÄ°
        async function loadPerformanceAdmin() {
            try {
                const response = await fetch('performance_handler.php');
                const result = await response.json();

                const tbody = document.getElementById('performance-list');
                const summary = document.getElementById('performance-summary');

                if (result.success && result.data.length > 0) {
                    tbody.innerHTML = '';
                    let totalActivities = 0, totalParticipants = 0, totalContent = 0;

                    result.data.forEach((item, index) => {
                        const rank = index + 1;
                        let medal = rank;
                        let rowStyle = '';

                        if (rank === 1) { medal = 'ğŸ¥‡'; rowStyle = 'background: #fff9e6;'; }
                        else if (rank === 2) { medal = 'ğŸ¥ˆ'; rowStyle = 'background: #f5f5f5;'; }
                        else if (rank === 3) { medal = 'ğŸ¥‰'; rowStyle = 'background: #fef0e6;'; }

                        totalActivities += item.activities;
                        totalParticipants += item.participants;
                        totalContent += item.content;

                        tbody.innerHTML += `
                            <tr style="${rowStyle}">
                                <td style="text-align: center; font-weight: 700; font-size: 18px;">${medal}</td>
                                <td><strong>${item.school}</strong>${item.isCoordinator ? ' <span style="background: #667eea; color: white; padding: 2px 8px; border-radius: 8px; font-size: 11px;">Koordinator</span>' : ''}</td>
                                <td>${item.region}</td>
                                <td style="text-align: center;"><span style="background: #e3f2fd; padding: 4px 10px; border-radius: 8px; font-weight: 600;">${item.activities}</span></td>
                                <td style="text-align: center;"><span style="background: #f3e5f5; padding: 4px 10px; border-radius: 8px; font-weight: 600;">${item.participants}</span></td>
                                <td style="text-align: center;"><span style="background: #e8f5e9; padding: 4px 10px; border-radius: 8px; font-weight: 600;">${item.content}</span></td>
                                <td style="text-align: center;">${item.coordinatorBonus > 0 ? '+' + item.coordinatorBonus : '-'}</td>
                                <td style="text-align: center; font-weight: 700; font-size: 18px; color: #667eea;">${item.totalScore}</td>
                            </tr>
                        `;
                    });

                    summary.innerHTML = `
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; color: white; text-align: center;">
                            <div style="font-size: 28px; font-weight: 700;">${totalActivities}</div>
                            <div style="font-size: 13px; opacity: 0.9;">Toplam Etkinlik</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 20px; border-radius: 12px; color: white; text-align: center;">
                            <div style="font-size: 28px; font-weight: 700;">${totalParticipants}</div>
                            <div style="font-size: 13px; opacity: 0.9;">Toplam Katilimci</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #4facfe, #00f2fe); padding: 20px; border-radius: 12px; color: white; text-align: center;">
                            <div style="font-size: 28px; font-weight: 700;">${totalContent}</div>
                            <div style="font-size: 13px; opacity: 0.9;">Toplam Icerik</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #43e97b, #38f9d7); padding: 20px; border-radius: 12px; color: white; text-align: center;">
                            <div style="font-size: 28px; font-weight: 700;">${result.data.reduce((sum, i) => sum + i.totalScore, 0)}</div>
                            <div style="font-size: 13px; opacity: 0.9;">Toplam Puan</div>
                        </div>
                    `;
                } else {
                    tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 30px; color: #999;">Henuz veri yok. Etkinlik ve icerik ekleyerek performans puani kazanin.</td></tr>';
                    summary.innerHTML = '';
                }
            } catch (error) {
                console.error('Performans verileri yuklenemedi:', error);
                document.getElementById('performance-list').innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 30px; color: #e74c3c;">Performans verileri yuklenemedi.</td></tr>';
            }
        }

        // VERÄ° YÃ–NETÄ°MÄ°
        async function exportData() {
            // Sunucudan gÃ¼ncel verileri al
            try {
                const [regionsRes, schoolsRes, activitiesRes, galleryRes, contentRes] = await Promise.all([
                    fetch(REGIONS_API).then(r => r.json()),
                    fetch(SCHOOLS_API).then(r => r.json()),
                    fetch(ACTIVITIES_API).then(r => r.json()),
                    fetch(GALLERY_API).then(r => r.json()),
                    fetch(API_URL).then(r => r.json())
                ]);

                const data = {
                    regions: regionsRes.data || [],
                    schools: schoolsRes.data || [],
                    activities: activitiesRes.data || [],
                    gallery: galleryRes.data || [],
                    sharedContent: contentRes.data || [],
                    exportDate: new Date().toISOString()
                };

                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);

                const link = document.createElement('a');
                link.href = url;
                link.download = `anadolunun-mirasi-${new Date().toISOString().split('T')[0]}.json`;
                link.click();

                URL.revokeObjectURL(url);
                alert('Veriler baÅŸarÄ±yla dÄ±ÅŸa aktarÄ±ldÄ±!');
            } catch (error) {
                alert('DÄ±ÅŸa aktarma hatasÄ±: ' + error.message);
            }
        }

        async function importData() {
            const fileInput = document.getElementById('import-file');
            const file = fileInput.files[0];

            if (!file) {
                alert('LÃ¼tfen bir dosya seÃ§in!');
                return;
            }

            const reader = new FileReader();
            reader.onload = async function(e) {
                try {
                    const data = JSON.parse(e.target.result);

                    if (confirm('Yeni veriler mevcut verilere eklenecek. Devam etmek istiyor musunuz?')) {
                        const importPromises = [];

                        // BÃ¶lgeleri iÃ§e aktar
                        if (data.regions) {
                            for (const region of data.regions) {
                                importPromises.push(
                                    fetch(REGIONS_API, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(region)
                                    })
                                );
                            }
                        }

                        // OkullarÄ± iÃ§e aktar
                        if (data.schools) {
                            for (const school of data.schools) {
                                importPromises.push(
                                    fetch(SCHOOLS_API, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(school)
                                    })
                                );
                            }
                        }

                        // Etkinlikleri iÃ§e aktar
                        if (data.activities) {
                            for (const activity of data.activities) {
                                importPromises.push(
                                    fetch(ACTIVITIES_API, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(activity)
                                    })
                                );
                            }
                        }

                        // Galeriyi iÃ§e aktar
                        if (data.gallery) {
                            for (const item of data.gallery) {
                                importPromises.push(
                                    fetch(GALLERY_API, {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify(item)
                                    })
                                );
                            }
                        }

                        await Promise.allSettled(importPromises);
                        await loadAllDataFromServer();
                        updateDropdowns();

                        alert('Veriler baÅŸarÄ±yla iÃ§e aktarÄ±ldÄ±!');
                        fileInput.value = '';
                    }
                } catch (error) {
                    alert('Dosya okunamadÄ±! LÃ¼tfen geÃ§erli bir JSON dosyasÄ± seÃ§in.');
                }
            };
            reader.readAsText(file);
        }

        function clearAllData() {
            alert('VeritabanÄ± verilerini silmek iÃ§in phpMyAdmin kullanÄ±n veya her bÃ¶lÃ¼mden tek tek silin.');
        }

        // LOGIN SÄ°STEMÄ°

        // Sayfa yÃ¼klendiÄŸinde login kontrolÃ¼
        window.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
        });

        // Login form submit
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            try {
                const response = await fetch('admin_login.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });
                const result = await response.json();

                if (result.success) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('loginTime', new Date().getTime());
                    showAdminPanel();
                } else {
                    document.getElementById('loginError').classList.add('show');
                    document.getElementById('password').value = '';
                    setTimeout(() => {
                        document.getElementById('loginError').classList.remove('show');
                    }, 3000);
                }
            } catch (err) {
                document.getElementById('loginError').classList.add('show');
                document.getElementById('password').value = '';
                setTimeout(() => {
                    document.getElementById('loginError').classList.remove('show');
                }, 3000);
            }
        });

        // Login durumu kontrolÃ¼
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const loginTime = localStorage.getItem('loginTime');
            const currentTime = new Date().getTime();

            // 24 saat = 86400000 milisaniye
            const sessionDuration = 24 * 60 * 60 * 1000;

            if (isLoggedIn === 'true' && loginTime && (currentTime - loginTime < sessionDuration)) {
                showAdminPanel();
            } else {
                showLoginScreen();
                // Oturum sÃ¼resi dolmuÅŸsa temizle
                if (loginTime && (currentTime - loginTime >= sessionDuration)) {
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('loginTime');
                }
            }
        }

        // Admin panelini gÃ¶ster
        function showAdminPanel() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminPanel').classList.add('show');
            // OkunmamÄ±ÅŸ mesaj sayÄ±sÄ±nÄ± gÃ¼ncelle
            updateUnreadBadge();
        }

        // Login ekranÄ±nÄ± gÃ¶ster
        function showLoginScreen() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('adminPanel').classList.remove('show');
        }

        // Ã‡Ä±kÄ±ÅŸ yap
        function logout() {
            if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinizden emin misiniz?')) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('loginTime');
                showLoginScreen();
                document.getElementById('loginForm').reset();
            }
        }

        // ==================== Gelen Kutusu FonksiyonlarÄ± ====================
        let allMessages = [];

        // MesajlarÄ± yÃ¼kle
        async function loadMessages() {
            try {
                const response = await fetch('upload.php?action=get_messages');
                const result = await response.json();

                if (result.success) {
                    allMessages = result.data;
                    displayMessages(allMessages);
                    updateUnreadBadge();
                } else {
                    alert('Mesajlar yÃ¼klenemedi: ' + result.message);
                }
            } catch (error) {
                console.error('Mesajlar yÃ¼klenirken hata:', error);
                alert('Mesajlar yÃ¼klenirken bir hata oluÅŸtu.');
            }
        }

        // MesajlarÄ± gÃ¶rÃ¼ntÃ¼le
        function displayMessages(messages) {
            const messagesList = document.getElementById('messages-list');

            if (messages.length === 0) {
                messagesList.innerHTML = '<div style="padding: 40px; text-align: center; color: #999;"><h3>ğŸ“­ Mesaj yok</h3><p>HenÃ¼z gelen mesaj bulunmuyor.</p></div>';
                return;
            }

            messagesList.innerHTML = messages.map(msg => `
                <div class="message-card" style="background: ${msg.is_read ? '#f9f9f9' : '#e3f2fd'}; padding: 20px; border-radius: 10px; border-left: 4px solid ${msg.is_read ? '#ddd' : '#2196F3'}; position: relative;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 5px 0; color: #2c3e50;">
                                ${msg.is_read ? '' : 'ğŸ”µ '}${msg.subject}
                            </h3>
                            <div style="color: #666; font-size: 14px;">
                                <strong>ğŸ‘¤ ${msg.name}</strong> â€¢
                                ğŸ“§ <a href="mailto:${msg.email}" style="color: #3498db;">${msg.email}</a> â€¢
                                ğŸ“… ${formatDateTime(msg.created_at)}
                            </div>
                        </div>
                        <div style="display: flex; gap: 5px;">
                            ${!msg.is_read ? `<button class="btn btn-info btn-sm" onclick="markAsRead(${msg.id})" title="Okundu olarak iÅŸaretle">âœ…</button>` : ''}
                            <button class="btn btn-danger btn-sm" onclick="deleteMessage(${msg.id})" title="Sil">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <p style="margin: 0; white-space: pre-wrap; color: #2c3e50;">${msg.message}</p>
                    </div>
                </div>
            `).join('');
        }

        // MesajlarÄ± filtrele
        function filterMessages(filter) {
            let filtered = allMessages;

            if (filter === 'unread') {
                filtered = allMessages.filter(msg => !msg.is_read);
            } else if (filter === 'read') {
                filtered = allMessages.filter(msg => msg.is_read);
            }

            displayMessages(filtered);
        }

        // MesajÄ± okundu olarak iÅŸaretle
        async function markAsRead(id) {
            if (!confirm('Bu mesajÄ± okundu olarak iÅŸaretlemek istiyor musunuz?')) return;

            try {
                const response = await fetch('upload.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'mark_read',
                        id: id
                    })
                });

                const result = await response.json();

                if (result.success) {
                    loadMessages();
                } else {
                    alert('Mesaj iÅŸaretlenemedi: ' + result.message);
                }
            } catch (error) {
                console.error('Mesaj iÅŸaretlenirken hata:', error);
                alert('Mesaj iÅŸaretlenirken bir hata oluÅŸtu.');
            }
        }

        // MesajÄ± sil
        async function deleteMessage(id) {
            if (!confirm('Bu mesajÄ± silmek istediÄŸinizden emin misiniz?')) return;

            try {
                const response = await fetch('upload.php', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'delete_message',
                        id: id
                    })
                });

                const result = await response.json();

                if (result.success) {
                    loadMessages();
                } else {
                    alert('Mesaj silinemedi: ' + result.message);
                }
            } catch (error) {
                console.error('Mesaj silinirken hata:', error);
                alert('Mesaj silinirken bir hata oluÅŸtu.');
            }
        }

        // OkunmamÄ±ÅŸ mesaj sayÄ±sÄ±nÄ± gÃ¼ncelle
        async function updateUnreadBadge() {
            try {
                const response = await fetch('upload.php?action=unread_count');
                const result = await response.json();

                if (result.success && result.count > 0) {
                    const badge = document.getElementById('unread-badge');
                    badge.textContent = result.count;
                    badge.style.display = 'inline';
                } else {
                    document.getElementById('unread-badge').style.display = 'none';
                }
            } catch (error) {
                console.error('OkunmamÄ±ÅŸ mesaj sayÄ±sÄ± alÄ±namadÄ±:', error);
            }
        }

        // Tarih formatla
        function formatDateTime(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleString('tr-TR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Sayfa yÃ¼klendiÄŸinde okunmamÄ±ÅŸ mesaj sayÄ±sÄ±nÄ± gÃ¼ncelle
        setInterval(updateUnreadBadge, 30000); // Her 30 saniyede bir gÃ¼ncelle

        // ==================== Okul HakkÄ±nda FonksiyonlarÄ± ====================

        // Okul HakkÄ±nda dropdown'Ä±nÄ± gÃ¼ncelle
        function updateAboutSchoolDropdown() {
            const select = document.getElementById('about-school-select');
            if (!select) return;
            const currentVal = select.value;
            select.innerHTML = '<option value="">-- Okul SeÃ§in --</option>';
            schools.forEach(school => {
                select.innerHTML += `<option value="${school.name}">${school.name}</option>`;
            });
            if (currentVal) select.value = currentVal;
        }

        // Sayfa yÃ¼klendiÄŸinde dropdown gÃ¼ncelle
        const origUpdateDropdowns = updateDropdowns;
        updateDropdowns = function() {
            origUpdateDropdowns();
            updateAboutSchoolDropdown();
        };
        // Ä°lk yÃ¼klemede de Ã§alÄ±ÅŸtÄ±r
        document.addEventListener('DOMContentLoaded', function() {
            updateAboutSchoolDropdown();
        });

        // SeÃ§ili okul iÃ§in verileri yÃ¼kle
        async function loadSchoolAboutData() {
            const schoolName = document.getElementById('about-school-select').value;
            const formContainer = document.getElementById('school-about-form-container');

            if (!schoolName) {
                formContainer.style.display = 'none';
                return;
            }

            formContainer.style.display = 'block';
            clearSchoolAboutForm();

            try {
                const response = await fetch('school_info_handler.php?school=' + encodeURIComponent(schoolName));
                const result = await response.json();

                if (result.success && result.data.length > 0) {
                    result.data.forEach(item => {
                        fillAboutField(item.info_type, item.content);
                    });
                    loadSchoolAboutSummary(result.data);
                } else {
                    document.getElementById('school-about-summary').innerHTML = '<p style="color: #999; text-align: center;">Bu okul iÃ§in henÃ¼z kayÄ±tlÄ± bilgi yok.</p>';
                }
            } catch (error) {
                console.error('Okul bilgileri yÃ¼klenirken hata:', error);
            }
        }

        // Alandan veriyi doldur
        function fillAboutField(infoType, content) {
            try {
                const data = JSON.parse(content);
                switch(infoType) {
                    case 'kurulus':
                        document.getElementById('about-kurulus-yili').value = data.yil || '';
                        document.getElementById('about-okul-turu').value = data.tur || '';
                        document.getElementById('about-kurulus-hikaye').value = data.hikaye || '';
                        break;
                    case 'ogrenci':
                        document.getElementById('about-ogrenci-toplam').value = data.toplam || '';
                        document.getElementById('about-ogrenci-kiz').value = data.kiz || '';
                        document.getElementById('about-ogrenci-erkek').value = data.erkek || '';
                        document.getElementById('about-sinif-sayisi').value = data.sinif || '';
                        break;
                    case 'ogretmen':
                        document.getElementById('about-ogretmen-toplam').value = data.toplam || '';
                        document.getElementById('about-mudur-adi').value = data.mudur || '';
                        document.getElementById('about-ogretmen-brans').value = data.brans || '';
                        break;
                    case 'basarilar':
                        document.getElementById('about-basari-akademik').value = data.akademik || '';
                        document.getElementById('about-basari-sportif').value = data.sportif || '';
                        document.getElementById('about-basari-sosyal').value = data.sosyal || '';
                        document.getElementById('about-basari-proje').value = data.proje || '';
                        break;
                }
            } catch(e) {
                // Eski format veya dÃ¼z metin ise
            }
        }

        // Okul bilgilerini kaydet
        async function saveSchoolAboutData() {
            const schoolName = document.getElementById('about-school-select').value;
            if (!schoolName) {
                alert('LÃ¼tfen bir okul seÃ§in!');
                return;
            }

            const sections = [
                {
                    info_type: 'kurulus',
                    content: JSON.stringify({
                        yil: document.getElementById('about-kurulus-yili').value,
                        tur: document.getElementById('about-okul-turu').value,
                        hikaye: document.getElementById('about-kurulus-hikaye').value
                    })
                },
                {
                    info_type: 'ogrenci',
                    content: JSON.stringify({
                        toplam: document.getElementById('about-ogrenci-toplam').value,
                        kiz: document.getElementById('about-ogrenci-kiz').value,
                        erkek: document.getElementById('about-ogrenci-erkek').value,
                        sinif: document.getElementById('about-sinif-sayisi').value
                    })
                },
                {
                    info_type: 'ogretmen',
                    content: JSON.stringify({
                        toplam: document.getElementById('about-ogretmen-toplam').value,
                        mudur: document.getElementById('about-mudur-adi').value,
                        brans: document.getElementById('about-ogretmen-brans').value
                    })
                },
                {
                    info_type: 'basarilar',
                    content: JSON.stringify({
                        akademik: document.getElementById('about-basari-akademik').value,
                        sportif: document.getElementById('about-basari-sportif').value,
                        sosyal: document.getElementById('about-basari-sosyal').value,
                        proje: document.getElementById('about-basari-proje').value
                    })
                }
            ];

            let savedCount = 0;
            for (const section of sections) {
                try {
                    const response = await fetch('school_info_handler.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            school_name: schoolName,
                            info_type: section.info_type,
                            content: section.content
                        })
                    });
                    const result = await response.json();
                    if (result.success) savedCount++;
                } catch (error) {
                    console.error('Kaydetme hatasÄ±:', error);
                }
            }

            if (savedCount === sections.length) {
                showAlert('school-about-alert', `${schoolName} bilgileri baÅŸarÄ±yla kaydedildi!`);
                loadSchoolAboutData(); // Ã–zeti gÃ¼ncelle
            } else {
                showAlert('school-about-alert', 'BazÄ± bilgiler kaydedilemedi!', 'error');
            }
        }

        // Ã–zet tablosunu gÃ¶ster
        function loadSchoolAboutSummary(data) {
            const container = document.getElementById('school-about-summary');
            const labels = {
                'kurulus': { icon: 'ğŸ›ï¸', title: 'KuruluÅŸ Bilgileri' },
                'ogrenci': { icon: 'ğŸ‘¨â€ğŸ“', title: 'Ã–ÄŸrenci Bilgileri' },
                'ogretmen': { icon: 'ğŸ‘©â€ğŸ«', title: 'Ã–ÄŸretmen Kadrosu' },
                'basarilar': { icon: 'ğŸ†', title: 'BaÅŸarÄ±lar' }
            };

            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">';

            data.forEach(item => {
                const label = labels[item.info_type] || { icon: 'ğŸ“„', title: item.info_type };
                let details = '';
                try {
                    const parsed = JSON.parse(item.content);
                    const entries = Object.entries(parsed).filter(([k, v]) => v && v.trim && v.trim() !== '');
                    details = entries.map(([k, v]) => `<div style="margin: 4px 0; font-size: 13px;"><strong>${formatFieldName(k)}:</strong> ${v.length > 80 ? v.substring(0, 80) + '...' : v}</div>`).join('');
                } catch(e) {
                    details = '<div style="font-size: 13px;">' + item.content + '</div>';
                }

                if (!details) details = '<div style="color: #999; font-size: 13px;">HenÃ¼z girilmemiÅŸ</div>';

                html += `
                    <div style="background: white; padding: 18px; border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px; color: #333;">${label.icon} ${label.title}</div>
                        ${details}
                        <div style="font-size: 11px; color: #aaa; margin-top: 8px;">Son gÃ¼ncelleme: ${new Date(item.updated_at).toLocaleString('tr-TR')}</div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        function formatFieldName(key) {
            const names = {
                'yil': 'KuruluÅŸ YÄ±lÄ±', 'tur': 'Okul TÃ¼rÃ¼', 'hikaye': 'TarihÃ§e',
                'toplam': 'Toplam', 'kiz': 'KÄ±z', 'erkek': 'Erkek', 'sinif': 'SÄ±nÄ±f SayÄ±sÄ±',
                'mudur': 'MÃ¼dÃ¼r', 'brans': 'BranÅŸ DaÄŸÄ±lÄ±mÄ±',
                'akademik': 'Akademik', 'sportif': 'Sportif', 'sosyal': 'Sosyal/KÃ¼ltÃ¼rel', 'proje': 'Proje'
            };
            return names[key] || key;
        }

        // Formu temizle
        function clearSchoolAboutForm() {
            const ids = [
                'about-kurulus-yili', 'about-okul-turu', 'about-kurulus-hikaye',
                'about-ogrenci-toplam', 'about-ogrenci-kiz', 'about-ogrenci-erkek', 'about-sinif-sayisi',
                'about-ogretmen-toplam', 'about-mudur-adi', 'about-ogretmen-brans',
                'about-basari-akademik', 'about-basari-sportif', 'about-basari-sosyal', 'about-basari-proje'
            ];
            ids.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = '';
            });
            document.getElementById('school-about-summary').innerHTML = '';
        }

        // ==================== Lig FonksiyonlarÄ± ====================

        let currentLeague = '';

        const leagueSchools = [
            'GÃ¶ztepe Ä°hsan KurÅŸunoÄŸlu Anadolu Lisesi',
            'TEB AtaÅŸehir Anadolu Lisesi',
            'AtatÃ¼rk Fen Lisesi',
            'Kadir Has Anadolu Lisesi',
            'KadÄ±kÃ¶y Anadolu Lisesi',
            'ErenkÃ¶y KÄ±z Anadolu Lisesi',
            'Hayrullah KefoÄŸlu Anadolu Lisesi'
        ];

        function selectLeague(leagueName) {
            currentLeague = leagueName;
            document.getElementById('league-form-container').style.display = 'block';
            document.getElementById('league-selected-title').textContent = leagueName;

            // Buton stillerini gÃ¼ncelle
            const btnV = document.getElementById('league-btn-voleybol');
            const btnB = document.getElementById('league-btn-basketbol');
            if (leagueName.includes('Voleybol')) {
                btnV.className = 'btn btn-primary';
                btnB.className = 'btn btn-secondary';
            } else {
                btnV.className = 'btn btn-secondary';
                btnB.className = 'btn btn-primary';
            }

            // Okul dropdown'Ä± doldur
            const select = document.getElementById('league-school-select');
            select.innerHTML = '<option value="">-- Okul SeÃ§in --</option>';
            leagueSchools.forEach(school => {
                select.innerHTML += `<option value="${school}">${school}</option>`;
            });

            loadLeagueStandings();
        }

        async function loadLeagueStandings() {
            if (!currentLeague) return;

            try {
                const response = await fetch('league_handler.php?league=' + encodeURIComponent(currentLeague));
                const result = await response.json();

                const tbody = document.getElementById('league-standings-body');

                if (result.success && result.data.length > 0) {
                    // Puana gÃ¶re sÄ±rala
                    const sorted = result.data.sort((a, b) => b.points - a.points || b.won - a.won);
                    tbody.innerHTML = sorted.map((item, index) => {
                        const rowBg = index === 0 ? 'background: #fff9e6;' : (index % 2 === 0 ? 'background: #fafafa;' : '');
                        const medal = index === 0 ? 'ğŸ¥‡' : (index === 1 ? 'ğŸ¥ˆ' : (index === 2 ? 'ğŸ¥‰' : (index + 1)));
                        return `
                            <tr style="${rowBg} border-bottom: 1px solid #eee;">
                                <td style="padding: 12px; text-align: center; font-weight: 700; font-size: 16px;">${medal}</td>
                                <td style="padding: 12px; font-weight: 600; font-size: 13px;">${item.school_name}</td>
                                <td style="padding: 12px; text-align: center;">${item.played}</td>
                                <td style="padding: 12px; text-align: center; color: #27ae60; font-weight: 600;">${item.won}</td>
                                <td style="padding: 12px; text-align: center; color: #f39c12; font-weight: 600;">${item.drawn}</td>
                                <td style="padding: 12px; text-align: center; color: #e74c3c; font-weight: 600;">${item.lost}</td>
                                <td style="padding: 12px; text-align: center; font-weight: 700; font-size: 16px; color: #667eea;">${item.points}</td>
                                <td style="padding: 12px; text-align: center;">
                                    <button onclick="editLeagueRow(${item.id}, '${item.school_name.replace(/'/g, "\\'")}', ${item.played}, ${item.won}, ${item.drawn}, ${item.lost}, ${item.points})" style="background: #3498db; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; margin-right: 4px;">âœï¸</button>
                                    <button onclick="deleteLeagueRow(${item.id})" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ—‘ï¸</button>
                                </td>
                            </tr>
                        `;
                    }).join('');
                } else {
                    tbody.innerHTML = '<tr><td colspan="8" style="padding: 30px; text-align: center; color: #999;">HenÃ¼z puan verisi girilmemiÅŸ. AÅŸaÄŸÄ±daki formu kullanarak veri girin.</td></tr>';
                }
            } catch (error) {
                console.error('Lig verileri yÃ¼klenirken hata:', error);
            }
        }

        function editLeagueRow(id, schoolName, played, won, drawn, lost, points) {
            document.getElementById('league-school-select').value = schoolName;
            document.getElementById('league-played').value = played;
            document.getElementById('league-won').value = won;
            document.getElementById('league-drawn').value = drawn;
            document.getElementById('league-lost').value = lost;
            document.getElementById('league-points').value = points;
        }

        async function deleteLeagueRow(id) {
            if (!confirm('Bu lig verisini silmek istediÄŸinize emin misiniz?')) return;

            try {
                const response = await fetch('league_handler.php', {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ id: id })
                });
                const result = await response.json();
                if (result.success) {
                    showAlert('league-alert', 'Lig verisi silindi!');
                    loadLeagueStandings();
                }
            } catch (error) {
                console.error('Silme hatasÄ±:', error);
            }
        }

        async function saveLeagueData() {
            const schoolName = document.getElementById('league-school-select').value;
            if (!currentLeague || !schoolName) {
                alert('LÃ¼tfen bir lig ve okul seÃ§in!');
                return;
            }

            const payload = {
                league_name: currentLeague,
                school_name: schoolName,
                played: parseInt(document.getElementById('league-played').value) || 0,
                won: parseInt(document.getElementById('league-won').value) || 0,
                drawn: parseInt(document.getElementById('league-drawn').value) || 0,
                lost: parseInt(document.getElementById('league-lost').value) || 0,
                points: parseInt(document.getElementById('league-points').value) || 0
            };

            try {
                const response = await fetch('league_handler.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.success) {
                    showAlert('league-alert', `${schoolName} puan verisi kaydedildi!`);
                    clearLeagueForm();
                    loadLeagueStandings();
                } else {
                    showAlert('league-alert', result.message, 'error');
                }
            } catch (error) {
                console.error('Kaydetme hatasÄ±:', error);
            }
        }

        function clearLeagueForm() {
            document.getElementById('league-school-select').value = '';
            document.getElementById('league-played').value = '';
            document.getElementById('league-won').value = '';
            document.getElementById('league-drawn').value = '';
            document.getElementById('league-lost').value = '';
            document.getElementById('league-points').value = '';
        }
    </script>
</body>
</html>
